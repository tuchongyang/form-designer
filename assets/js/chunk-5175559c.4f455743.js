(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5175559c"],{"083a":function(e,t,a){},"2f25":function(e,t,a){"use strict";a("083a")},"42fa":function(e,t,a){"use strict";a("6594")},6594:function(e,t,a){},8248:function(e,t,a){"use strict";a.r(t);var c=a("7a23");Object(c["K"])("data-v-0ddafe8c");var n={class:"container"},l={class:"sub-header"},r={class:"title"},i=Object(c["m"])("ul",{class:"tabs"},[Object(c["m"])("li",{class:"active"},"列表视图")],-1),o={class:"panel-center"},u={class:"wrapper"};function d(e,t,a,d,s,b){var v,j=Object(c["P"])("HeaderBar"),O=Object(c["P"])("ListView");return Object(c["H"])(),Object(c["l"])("div",n,[Object(c["o"])(j),Object(c["m"])("div",l,[Object(c["m"])("div",r,Object(c["S"])(null===(v=e.detail)||void 0===v?void 0:v.title),1),i]),Object(c["m"])("div",o,[Object(c["m"])("div",u,[Object(c["o"])(O,{detail:e.detail},null,8,["detail"])])])])}Object(c["I"])();var s=a("5530"),b=(a("d3b7"),a("79f6")),v=a("6c02"),j=a("f64c"),O=a("ce0e");a("b0c0");Object(c["K"])("data-v-a4df706c");var f={key:0},p={key:1},m=Object(c["n"])("详情"),y={class:"list"},w={class:"label"},h={class:"det"};function k(e,t,a,n,l,r){var i=Object(c["P"])("a-button"),o=Object(c["P"])("a-table"),u=Object(c["P"])("a-drawer");return Object(c["H"])(),Object(c["l"])(c["b"],null,[Object(c["o"])(o,{dataSource:e.list,columns:e.columns,rowKey:"id"},{creator:Object(c["ab"])((function(e){var t=e.record;return[t.user?(Object(c["H"])(),Object(c["l"])("span",f,Object(c["S"])(t.user.name||t.user.username),1)):(Object(c["H"])(),Object(c["l"])("span",p,"游客"))]})),action:Object(c["ab"])((function(t){var a=t.record;return[Object(c["o"])(i,{onClick:function(t){return e.openDetail(a)}},{default:Object(c["ab"])((function(){return[m]})),_:2},1032,["onClick"])]})),_:1},8,["dataSource","columns"]),Object(c["o"])(u,{title:"反馈详情",placement:"right",closable:!1,visible:e.visible,"onUpdate:visible":t[0]||(t[0]=function(t){return e.visible=t}),width:600},{default:Object(c["ab"])((function(){return[Object(c["m"])("div",y,[(Object(c["H"])(!0),Object(c["l"])(c["b"],null,Object(c["N"])(e.currentData,(function(e,t){return Object(c["H"])(),Object(c["l"])("div",{class:"item",key:t},[Object(c["m"])("div",w,Object(c["S"])(t+1)+"."+Object(c["S"])(e.label),1),Object(c["m"])("div",h,Object(c["S"])(e.value),1)])})),128))])]})),_:1},8,["visible"])],64)}Object(c["I"])();a("d81d"),a("a15b");var S=a("614f"),g={detail:{type:Object,default:function(){return{}}}},H=Object(c["p"])({props:g,setup:function(e){var t=Object(v["c"])(),a=Object(S["a"])({api:b["a"].form.answer.list,params:{formId:t.query.id}}),n=a.total,l=a.loading,r=a.list,i=a.listQuery,o=a.loadData,u=Object(c["M"])([{title:"提交时间",dataIndex:"createdAt",key:"createdAt"},{title:"提交人",key:"creator",slots:{customRender:"creator"}},{title:"提交Ip",dataIndex:"ip",key:"ip"},{title:"操作",key:"action",slots:{customRender:"action"}}]);o();var d=Object(c["M"])(!1),s=Object(c["M"])([]),j=function(t){var a=e.detail,c=JSON.parse(t.content);s.value=a.content.modules.map((function(e){var t="";return t=c[e.id]instanceof Array?c[e.id].join(","):c[e.id],{label:e.label,value:t}})),console.log("currentData.value",s.value),d.value=!0};return{total:n,loading:l,list:r,listQuery:i,loadData:o,columns:u,visible:d,openDetail:j,currentData:s}}});a("2f25");H.render=k,H.__scopeId="data-v-a4df706c";var I=H,D=Object(c["p"])({components:{HeaderBar:O["a"],ListView:I},props:{mode:{type:String,default:""}},setup:function(e){var t=Object(v["c"])(),a=Object(c["M"])(null),n=Object(c["h"])((function(){var e,t;return(null===(e=a.value)||void 0===e||null===(t=e.content)||void 0===t?void 0:t.modules)||[]})),l=Object(c["M"])({}),r=Object(c["M"])(!1),i=function(){var e=t.query.id||0;r.value=!0,b["a"].form.detail(+e).then((function(e){var t;try{t=JSON.parse(e.result.publishContent||"")}catch(r){t=null}for(var c in null===t&&(t={skin:{containerStyle:{},headerStyle:{}},modules:[]}),a.value=Object(s["a"])(Object(s["a"])({},e.result),{},{content:t}),t.modules){var n=t.modules[c];l.value[n.id]=n.defaultValue||""}console.log("form",l.value)})).finally((function(){r.value=!1}))};i();var o=function(){var t,c;"preview"!=e.mode?(console.log("form",l.value),null!==(t=a.value)&&void 0!==t&&t.id&&b["a"].form.answer.save(null===(c=a.value)||void 0===c?void 0:c.id,l.value).then((function(){j["a"].success("提交成功")}))):j["a"].info("当前处于预览模式，无法提交")};return{detail:a,modules:n,form:l,save:o,loading:r}}});a("42fa");D.render=d,D.__scopeId="data-v-0ddafe8c";t["default"]=D},a15b:function(e,t,a){"use strict";var c=a("23e7"),n=a("44ad"),l=a("fc6a"),r=a("a640"),i=[].join,o=n!=Object,u=r("join",",");c({target:"Array",proto:!0,forced:o||!u},{join:function(e){return i.call(l(this),void 0===e?",":e)}})},d81d:function(e,t,a){"use strict";var c=a("23e7"),n=a("b727").map,l=a("1dde"),r=l("map");c({target:"Array",proto:!0,forced:!r},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);